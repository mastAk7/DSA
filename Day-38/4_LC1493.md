```cpp
class Solution {
public:
    int longestSubarray(vector<int>& nums) {
        int c = 0, ans = 0, l = 0, r = 0;
        while(r<nums.size()){
            if(!nums[r]){
                if(c==1){
                    while(l<=r && nums[l]) l++;
                    l++;
                } else c++;
            }
            ans = max(ans,r-l);
            r++;
        }
        return ans;
    }
};
```