```cpp
class Solution {
public:
    string decodeString(string s) {
        stack<char> stk;
        string ans;

        for(auto c:s){
            if(c==']'){
                string temp;
                while(stk.top()!='['){
                    char y = stk.top();
                    temp = y+temp;
                    stk.pop();
                }

                stk.pop();
                string num = "";
                while(!stk.empty() && stk.top()<='9' && stk.top()>='0'){ 
                    num += stk.top();
                    stk.pop();
                }
                reverse(num.begin(),num.end());
                int x=0;
                for(auto ch:num) x = x*10 + (ch-'0');

                for(int i=0; i<x; i++){
                    for(auto y:temp)
                    stk.push(y);
                }
            } else{
                stk.push(c);
            }
        }
        while(!stk.empty()){
            char y = stk.top();
            ans = y+ans;
            stk.pop();
        }

        return ans;
    }
};
```